local library = {}

local function AddCorner(Parent, Radius1, Radius2)
    local UICorner = Instance.new("UICorner")
    Radius1 = Radius1 or 0
    Radius2 = Radius2 or 10

    UICorner.Name = Parent.Name .. " Corner"
    UICorner.CornerRadius = UDim.new(Radius1, Radius2)
    UICorner.Parent = Parent
end

function library:CreateMain(key)
    local Gui = Instance.new("ScreenGui")
    local MainFrame = Instance.new("Frame")
    local TopTitle = Instance.new("TextLabel")
    local TabFrame = Instance.new("ScrollingFrame")
    local UIListLayout = Instance.new("UIListLayout")
    local CoreGui = game:GetService("CoreGui")
    local UserInputService = game:GetService("UserInputService")
    local bn = {}
    local keybinds = {}
    keybinds[0] = {}
    keybinds[0]["pressable"] = false
    local TabCount = 0.02
    local FirstTab = true
    local TableTab = {}
    local configs = {}
    local defaults = {
        ["arm7-4a/mobilesupport"] = {
            Toggle = {},
            exploit = identifyexecutor()
        }
    }
    local file = ".SHConfig"
    configs = defaults
    
    Gui.Name = "Symphony Hub"
    Gui.Parent = CoreGui
    Gui.ResetOnSpawn = false
    
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = Gui
    MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    MainFrame.Size = UDim2.new(0, 0, 0, 20)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.Visible = false
    MainFrame.Active = true
    MainFrame.Draggable = true

    AddCorner(MainFrame, 0, 5)
    
    TopTitle.Name = "TopTitle"
    TopTitle.Parent = MainFrame
    TopTitle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    TopTitle.Size = UDim2.new(0, 450, 0, 20)
    TopTitle.Font = Enum.Font.SourceSansBold
    TopTitle.Text = ""
    TopTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    TopTitle.TextSize = 20
    TopTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    TabFrame.Name = "TabFrame"
    TabFrame.Parent = MainFrame
    TabFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    TabFrame.Size = UDim2.new(0, 0, 0, 265)
    TabFrame.Position = UDim2.new(0.023, 0, 0.09, 0)
    TabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    TabFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
    TabFrame.Visible = false

    AddCorner(TabFrame, 0, 5)

    UIListLayout.Parent = TabFrame
    UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    UIListLayout.Padding = UDim.new(0.01, 1)

    local success, errors =pcall(function()
        configs = game:GetService("HttpService"):JSONDecode(readfile(file)) end)
        
        if not success and errors then
            writefile(file, game:GetService("HttpService"):JSONEncode(defaults))
            configs = defaults 
            else
        end

    local function async(name, value)
        configs["arm7-4a/mobilesupport"]["Toggle"][name] = value
        writefile(file, game:GetService("HttpService"):JSONEncode(configs))
    end

    task.wait(1)
    
    MainFrame.Visible = true
    MainFrame:TweenSize(UDim2.new(0, 450, 0, 20), "Out", "Quad", 0.5, true)
    
    task.wait(0.5)
    
    local title = " • Symphony Hub [BETA]"
    
    for i = 1, #title do
        TopTitle.Text = string.sub(title, 1, i)
        wait(0.1)
    end

    task.wait(0.5)
    
    MainFrame:TweenSize(UDim2.new(0, 450, 0, 300), "Out", "Quad", 0.5, true)
    
    UserInputService.InputBegan:Connect(function(KEY)
        if KEY.KeyCode == Enum.KeyCode.Unknown then return end
        if KEY.KeyCode == key then
            MainFrame.Visible = not MainFrame.Visible
        else
            if keybinds[0]["pressable"] then
                for _ = 1, #keybinds do
                    if keybinds[_].Value == "" then
                        keybinds[_].Value = KEY.KeyCode
                        keybinds[_].Inst.Text = UserInputService:GetStringForKeyCode(KEY.KeyCode)
                        keybinds[0]["pressable"] = false
                    end
                end
            else
                for _ = 1, #keybinds do
                    if keybinds[_].Value == KEY.KeyCode then
                        keybinds[_].Callback()
                    end
                end
            end
        end
    end)
    
    function bn:CreateTab(name)
        local Tab = Instance.new("TextButton")
        local ScrollingFrame = Instance.new("ScrollingFrame")
        local UIListLayout = Instance.new("UIListLayout")
        local Section = Instance.new("TextLabel")
    
        Tab.Name = "Tab_" .. name
        Tab.Parent = TabFrame
        Tab.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        Tab.Size = UDim2.new(0, 105, 0, 20)
        Tab.Position = UDim2.new(0.05, 0, TabCount, 0)
        Tab.Font = Enum.Font.SourceSansBold
        Tab.Text = name
        Tab.TextColor3 = Color3.fromRGB(255, 255, 255)
        Tab.TextSize = 16

        AddCorner(Tab, 0, 5)
    
        ScrollingFrame.Name = "Inst_" .. name
        ScrollingFrame.Parent = MainFrame
        ScrollingFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        ScrollingFrame.Size = UDim2.new(0, 0, 0, 265)
        ScrollingFrame.Position = UDim2.new(0.29, 0, 0.09, 0)
        ScrollingFrame.ScrollBarThickness = 0
        ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
        ScrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
        ScrollingFrame.Visible = false

        AddCorner(ScrollingFrame, 0, 5)
    
        UIListLayout.Parent = ScrollingFrame
        UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        UIListLayout.Padding = UDim.new(0.01, 1)
    
        Section.Name = "Section"
        Section.Parent = ScrollingFrame
        Section.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        Section.BackgroundTransparency = 1
        Section.Size = UDim2.new(0, 315, 0, 15)
        Section.Font = Enum.Font.SourceSansBold
        Section.Text = " " .. name .. ":"
        Section.TextColor3 = Color3.fromRGB(255, 255, 255)
        Section.TextSize = 20
        Section.TextXAlignment = Enum.TextXAlignment.Left
    
        local function Click()
            for _ = 1, #TableTab do
                if TableTab[_].Inst.Visible then
                    game:GetService("TweenService"):Create(TableTab[_].Tab,TweenInfo.new(0.25),{ TextSize = 16 }):Play()
                    TableTab[_].Inst:TweenSize(UDim2.new(0, 0, 0, 265), "Out", "Quad", 0.5, true)
                    wait(0.5)
                    TableTab[_].Inst.Visible = false
                    local Info = TweenInfo.new(1)
                end
            end
            ScrollingFrame.Visible = true
            ScrollingFrame:TweenSize(UDim2.new(0, 315, 0, 265), "Out", "Quad", 0.5, true)
            game:GetService("TweenService"):Create(Tab,TweenInfo.new(0.25),{ TextSize = 20 }):Play()
        end
    
        TabCount = TabCount + 0.1
    
        local count = #TableTab + 1
        TableTab[count] = {}
        TableTab[count].Name = name
        TableTab[count].Tab = Tab
        TableTab[count].Inst = ScrollingFrame
    
        Tab.MouseButton1Click:Connect(Click)
    
        if FirstTab then
            FirstTab = false
            wait(0.5)
            TabFrame.Visible = true
            TabFrame:TweenSize(UDim2.new(0, 115, 0, 265), "Out", "Quad", 0.5, true)
            ScrollingFrame.Visible = true
            ScrollingFrame:TweenSize(UDim2.new(0, 315, 0, 265), "Out", "Quad", 0.5, true)
            game:GetService("TweenService"):Create(Tab,TweenInfo.new(0.25),{ TextSize = 20 }):Play()
        else
        end
    
        local Property = {}
        
        task.wait(0.5)
    
        function Property:CreateButton(btnName, callback)
            btnName = btnName or "Button"
            callback = callback or function() end
            
            local Button = Instance.new("TextButton")
            
            Button.Name = btnName .. "_Button"
            Button.Parent = ScrollingFrame
            Button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Button.Size = UDim2.new(0, 315, 0, 25)
            Button.Font = Enum.Font.SourceSansBold
            Button.Text = btnName
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 20
            Button.MouseButton1Click:Connect(callback)
            
            AddCorner(Button, 0, 5)
        end
    
        function Property:CreateLabel(lbName)
            lbName = lbName or "Label"
            
            local Label = Instance.new("TextLabel")
            local upt = {}
            
            Label.Name = lbName .. "_Label"
            Label.Parent = ScrollingFrame
            Label.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(0, 315, 0, 15)
            Label.Font = Enum.Font.SourceSansBold
            Label.Text = lbName
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 17
            
            function upt:Update(new)
                Label.Text = new
            end
            return upt
        end
    
        function Property:CreateToggle(tgleName, callback)
            tgleName = tgleName or "Toggle"
            callback = callback or function() end
    
            local Frame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local Toggle = Instance.new("TextButton")
            local Toggle_2 = Instance.new("Frame")
            local toggle = false
            
            Frame.Name = tgleName .. "_Frame"
            Frame.Parent = ScrollingFrame
            Frame.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Frame.Size = UDim2.new(0, 315, 0, 25)
            
            AddCorner(Frame, 0, 5)
    
            Label.Name = "Title"
            Label.Parent = Frame
            Label.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(0, 200, 0, 25)
            Label.Font = Enum.Font.SourceSansBold
            Label.Text = " " .. tgleName
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 20
            Label.TextXAlignment = Enum.TextXAlignment.Left
    
            Toggle.Name = "Toggle"
            Toggle.Parent = Frame
            Toggle.AnchorPoint = Vector2.new(0, 0.5)
            Toggle.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            Toggle.BackgroundTransparency = 0.000
            Toggle.ClipsDescendants = false
            Toggle.Position = UDim2.new(0.8, 0, 0.5, 0)
            Toggle.Size = UDim2.new(0, 45, 0, 15)
            Toggle.Text = ""

            AddCorner(Toggle, 0, 15)

            Toggle_2.Name = "Toggle_2"
            Toggle_2.Parent = Toggle
            Toggle_2.AnchorPoint = Vector2.new(0, 0.5)
            Toggle_2.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            Toggle_2.BackgroundTransparency = 0.000
            Toggle_2.ClipsDescendants = false
            Toggle_2.Position = UDim2.new(0.1, 0, 0.5, 0)
            Toggle_2.Size = UDim2.new(0, 17, 0, 12.5)

            AddCorner(Toggle_2, 0, 15)

            local function Toggles()
                toggle = not toggle
                async(tgleName, toggle)
                if not toggle then
                    game:GetService("TweenService"):Create(Toggle,TweenInfo.new(0.25),{ BackgroundColor3 = Color3.fromRGB(0, 255, 0)}):Play()
                    Toggle_2:TweenPosition(UDim2.new(0.5,0,0.5,0), "Out", "Quad", 0.25, true)
                    callback(toggle)
                else
                    game:GetService("TweenService"):Create(Toggle,TweenInfo.new(0.25),{ BackgroundColor3 = Color3.fromRGB(255, 0, 0)}):Play()
                    Toggle_2:TweenPosition(UDim2.new(0.1,0,0.5,0), "Out", "Quad", 0.25, true)
                    callback(toggle)
                end
            end

            Toggle.MouseButton1Click:Connect(Toggles)
            if configs["arm7-4a/mobilesupport"]["Toggle"][tgleName] == true then
                Toggles()
            else
                async(tgleName, false)
            end
        end
    
        function Property:CreateTextbox(tbName, callback)
            tbName = tbName or "Textbox"
            callback = callback or function() end
    
            local Frame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local Textbox = Instance.new("TextBox")
            
            Frame.Name = tbName .. "_Frame"
            Frame.Parent = ScrollingFrame
            Frame.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Frame.Size = UDim2.new(0, 315, 0, 25)

            AddCorner(Frame, 0, 5)
    
            Label.Name = "Title"
            Label.Parent = Frame
            Label.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(0, 200, 0, 25)
            Label.Font = Enum.Font.SourceSansBold
            Label.Text = " " .. tbName
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 20
            Label.TextXAlignment = Enum.TextXAlignment.Left
    
            Textbox.Name = "Textbox"
            Textbox.Parent = Frame
            Textbox.BackgroundColor3 = Color3.fromRGB(104, 104, 104)
            Textbox.BackgroundTransparency = 0
            Textbox.AnchorPoint = Vector2.new(0, 0.5)
            Textbox.Size = UDim2.new(0, 115, 0, 15)
            Textbox.Position = UDim2.new(0.65, 0, 0.5, 0)
            Textbox.Font = Enum.Font.SourceSansBold
            Textbox.PlaceholderColor3 = Color3.fromRGB(0, 255, 0)
            Textbox.PlaceholderText = "Input Value"
            Textbox.Text = ""
            Textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
            Textbox.TextSize = 15
            Textbox.FocusLost:Connect(function()
                callback(Textbox.Text)
            end)

            AddCorner(Textbox, 0, 10)
        end

        function Property:CreateKeybind(tbName, originkey, callback)
            tbName = tbName or "KeyBinds"
            originkey = originkey or ""
            callback = callback or function() end
    
            local Frame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local Textbox = Instance.new("TextButton")
            local P = #keybinds + 1
            
            Frame.Name = tbName .. "_Frame"
            Frame.Parent = ScrollingFrame
            Frame.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Frame.Size = UDim2.new(0, 315, 0, 25)

            AddCorner(Frame, 0, 5)
    
            Label.Name = "Title"
            Label.Parent = Frame
            Label.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(0, 200, 0, 25)
            Label.Font = Enum.Font.SourceSansBold
            Label.Text = " " .. tbName
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 20
            Label.TextXAlignment = Enum.TextXAlignment.Left
    
            Textbox.Name = "Textbox"
            Textbox.Parent = Frame
            Textbox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            Textbox.BackgroundTransparency = 0
            Textbox.Position = UDim2.new(0.7, 0, 0.5, 0)
            Textbox.Size = UDim2.new(0, 85, 0, 15)
            Textbox.AnchorPoint = Vector2.new(0, 0.5)
            Textbox.Font = Enum.Font.SourceSansBold
            Textbox.Text = UserInputService:GetStringForKeyCode(originkey)
            Textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
            Textbox.TextSize = 15
            Textbox.MouseButton1Click:Connect(function()
                if not keybinds["pressable"] then
                    Textbox.Text = "Press Any Key"
                    keybinds[P].Value = ""
                    keybinds[0]["pressable"] = true
                end
            end)

            AddCorner(Textbox, 0, 5)

            keybinds[P] = {}
            keybinds[P].Value = originkey
            keybinds[P].Callback = callback
            keybinds[P].Inst = Textbox
        end

        function Property:CreateDropdown(lbName, list, callback)
            lbName = lbName or "Label"
            list = list or {}
            callback = callback or function() end
            
            local Label = Instance.new("TextButton")
            local selects = ""
            local upt = {}
            local Instp = {}
            local open = false
            
            Label.Name = lbName .. "_Label"
            Label.Parent = ScrollingFrame
            Label.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(0, 315, 0, 15)
            Label.Font = Enum.Font.SourceSansBold
            Label.Text = "🔻 " .. lbName
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 17
            
            function Toggle()
                open = not open
                for _ = 1, #Instp do
                    if open then
                        Instp[_].Visible = true
                        Label.Text = "🔺 " .. lbName .. selects
                    else
                        Instp[_].Visible = false
                        Label.Text = "🔻 " .. lbName .. selects
                    end
                end
            end
            
            Label.MouseButton1Click:Connect(Toggle)
            
            for _ = 1, #list do
                local Button = Instance.new("TextButton")
                
                Button.Name = list[_] .. "_Button"
                Button.Parent = ScrollingFrame
                Button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
                Button.Size = UDim2.new(0, 315, 0, 25)
                Button.Font = Enum.Font.SourceSansBold
                Button.Text = "➡️ " .. list[_] .. " ⬅️"
                Button.TextColor3 = Color3.fromRGB(255, 255, 255)
                Button.TextSize = 20
                Button.Visible = false
                Button.MouseButton1Click:Connect(function()
                    selects = " - " .. list[_]
                    Toggle()
                    callback(list[_])
                end)
                Instp[_] = Button
            end
        end
        return Property
    end
    return bn
end

return library